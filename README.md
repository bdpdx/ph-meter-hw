# phMeter
## A simple combination pH probe interface circuit

This is a simple analog front end (AFE), ADC and I2C isolator circuit to interface to a standard combination pH electrode.

## Circuit Theory of Operation
### AFE
A standard combination pH probe has the following electrial characteristics
- Very high output impedance (100MOhm - 1GOhm)
- Bipolar sub 1V output voltage (+/- 400mV)

The first characteristic requires careful circuit design.  First we must convert that high output impedance to a much lower one for input into an ADC.  U2, a LMP7721 opamp does this for us.  Next the really high output impedance has issues with leakage current.  Because the current drawn from the sensor is in the 100s of pA range, any current lost to leakage will have a significant effect on the reading from the sensor.  To combat leakage current, guard rings around and below the high impedance traces are employed.  The LMP7721 is specifically designed for this using a special pinout that allows easy implementation of a guard ring.  As well as using low leakage tanalum capacitors for supply bypassing on the opamp.  The pA range currents also require careful selection of the opamp.  The TI LMP7721 choosen is used because of its fA range input bias currents.  Most opamps with pA or even uA input bias currents will completely destroy or at best significantly affect the probe readings.
The second characteristic isn't as much of an issue.  One could use an ADC that is bipolar (positive and negative supplied) and directly read the negative output voltage of the sensor.  However, generating the negative supply requires more circuitry and more importantly often times injects a large source of noise into the system.  Another approach, the one used here, is to bias (shift) the sensor output up enough so that the sensor output never swings negative.  U4 (another LMP7721) is used to bias the reference electrode up by +512mV.  Often the reference electrode is connected to GND, but by doing this the sensor will give an output of ~100mV-900mV.  The voltage required to bias the sensor is generated by U5, a MCP1501 1.024V reference voltage source.  The output of U5 is passed to a voltage divider to obtain 512mV.  Which leads to the ...
### ADC
Dividing the reference voltage using a resistor divider introduces error as well.  The tolerances and thermal coeffecients of the resistors will lead to error in this new "reference" voltage which is biased into the sensor output voltage.  To remove these errors, a differential ADC is used.  U1, a LTC2473, is a 16bit sigma-delta differential input ADC with I2C output.  For the LTC2473, a ~1kOhm input resistance is recommended as well as a 0.1uF input capacitor.  The LTC2473 has a internally generated reference voltage of 1.25V.  With an input voltage range from the sensor of 0.1V to 0.9V, most all of the range of the ADC is utilized.
### I2C Isolation
We want galvanic isolation between the sensor and the rest of the system. This reduces the noise injected into the system as well as this system interferring with any other (potential) systems measuring the same sample, or vice versa.  The ADM3260, U3, provides an isolated power supply, ground and I2C bus drivers for this application.  The resistor divider of R7 and R8 sets the output voltage of the isolated DC-DC converter, in this case the output voltage is set to 3.3V to match the input voltage.

## Performance
*COMING SOON*